(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function c(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(n){if(n.ep)return;n.ep=!0;const o=c(n);fetch(n.href,o)}})();const M=document.querySelectorAll(".popup"),R=document.querySelectorAll(".closeAllModal"),S=document.querySelectorAll(".cosulationOpenModal"),U=document.querySelector(".popup-consultation"),q=document.querySelector(".popup-consultation2"),T=document.querySelector(".popup-alert"),s=document.getElementsByClassName("list__block"),d=document.getElementById("email-block");document.body.addEventListener("keydown",function(e){e.key=="Escape"&&$()});function $(){M.forEach(e=>e.style.display="none"),document.body.style.overflow=""}R.forEach(e=>e.addEventListener("click",function(t){$()}));function B(e,t,c,u){const n=document.querySelector(".modal-title"),o=document.querySelector(".modal-title2"),l=document.getElementById("titleHiddenMail"),r=document.getElementById("titleHiddenMail2"),m=document.querySelector(".btn-mark"),p=document.querySelector(".btn-mark2");u=="present"&&(q.style.display="block",o.textContent=`${e}`,p.textContent=t,r.value=c),u=="obg"&&(U.style.display="block",n.textContent=`${e}`,m.textContent=t,l.value=c)}S.forEach(e=>e.addEventListener("click",function(t){const c=t.target.dataset.type,u=t.target.dataset.title||"и получите консультацию",n=t.target.dataset.sub||"Получить консультацию",o=t.target.dataset.btn||"Получить консультацию";B(u,o,n,c)}));document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("consultForm");w(e,"route","Разместить объект")});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("consultForm2");w(e,"alert","Получить презентацию")});function a(e){e=e.replace(/[$$$$]/g,"\\$&");let c=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(window.location.href);return c?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null}let g=a("utm_source"),_=a("utm_medium"),f=a("utm_campaign"),y=a("utm_term"),h=a("utm_content"),k=a("utm_campaign_name"),b=a("utm_placement"),x=a("utm_device"),C=a("utm_region_name"),E=a("utm_position"),I=a("utm_position_type"),v=a("utm_source_type"),L=a("yclid");g!==null&&g!==""&&(document.cookie=`utm_source=${encodeURIComponent(g)}; path=/; max-age=2592000`);_!==null&&_!==""&&(document.cookie=`utm_medium=${encodeURIComponent(_)}; path=/; max-age=2592000`);f!==null&&f!==""&&(document.cookie=`utm_campaign=${encodeURIComponent(f)}; path=/; max-age=2592000`);y!==null&&y!==""&&(document.cookie=`utm_term=${encodeURIComponent(y)}; path=/; max-age=2592000`);h!==null&&h!==""&&(document.cookie=`utm_content=${encodeURIComponent(h)}; path=/; max-age=2592000`);k!==null&&k!==""&&(document.cookie=`utm_campaign_name=${encodeURIComponent(k)}; path=/; max-age=2592000`);b!==null&&b!==""&&(document.cookie=`utm_placement=${encodeURIComponent(b)}; path=/; max-age=2592000`);x!==null&&x!==""&&(document.cookie=`utm_device=${encodeURIComponent(x)}; path=/; max-age=2592000`);C!==null&&C!==""&&(document.cookie=`utm_region_name=${encodeURIComponent(C)}; path=/; max-age=2592000`);E!==null&&E!==""&&(document.cookie=`utm_position=${encodeURIComponent(E)}; path=/; max-age=2592000`);I!==null&&I!==""&&(document.cookie=`utm_position_type=${encodeURIComponent(I)}; path=/; max-age=2592000`);v!==null&&v!==""&&(document.cookie=`utm_source_type=${encodeURIComponent(v)}; path=/; max-age=2592000`);L!==null&&L!==""&&(document.cookie=`yclid=${encodeURIComponent(L)}; path=/; max-age=2592000`);function i(e){let t=e+"=",u=decodeURIComponent(document.cookie).split(";");for(let n=0;n<u.length;n++){let o=u[n];for(;o.charAt(0)==" ";)o=o.substring(1);if(o.indexOf(t)==0)return o.substring(t.length,o.length)}return""}function O(e){e.append("utm_source",i("utm_source")||""),e.append("utm_medium",i("utm_medium")||""),e.append("utm_campaign",i("utm_campaign")||""),e.append("utm_campaign_name",i("utm_campaign_name")||""),e.append("utm_content",i("utm_content")||""),e.append("utm_term",i("utm_term")||""),e.append("utm_placement",i("utm_placement")||""),e.append("utm_device",i("utm_device")||""),e.append("utm_region_name",i("utm_region_name")||""),e.append("utm_position",i("utm_position")||""),e.append("utm_position_type",i("utm_position_type")||""),e.append("utm_source_type",i("utm_source_type")||""),e.append("yclid",i("yclid")||""),e.append("subject","Письмо с сайта proinvestresort.ru")}function w(e,t,c){e.addEventListener("submit",async function(u){u.preventDefault();const n=u.srcElement.querySelector("#send-btn");n.disabled=!0,n.textContent="Отправка...";try{const o=new FormData(e);let l={};O(o);const r=await fetch("https://proinvestresort.ru/sendforms.php",{method:"POST",body:o});if(o.forEach((m,p)=>l[p]=m),localStorage.setItem("name",l.name),!r.ok)throw new Error(`Network response was not ok: ${r.status}`);if($(),n.disabled=!1,n.textContent=c,t==="route")ym(100282784,"reachGoal","goalLeadsClient"),window.location.href="/thanks.html";else{ym(100282784,"reachGoal","goalLeads");const m=document.getElementById("output-main");m.innerHTML=`${localStorage.getItem("name")}`,T.style.display="block"}}catch(o){console.error("Произошла ошибка при отправке формы.",o),alert("Произошла ошибка при отправке формы.",o)}})}d&&(d.style.display="none");let A=function(e){e.preventDefault();for(let t=0;t<s.length;t++)s[t].classList.remove("block-active");e.currentTarget.classList.add("block-active"),e.currentTarget.classList.contains("E-mail")&&(d.style.display="flex"),e.currentTarget.classList.contains("E-mail")||(d.style.display="none")};for(let e=0;e<s.length;e++)s[e].addEventListener("click",A,!1);const N=document.querySelectorAll("input[name=tel]"),F=function(e){let t=e.value.replace(/\D/g,"").match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);const c=t[1]?t[1]==9?"+7 (9":"+7":t[1],u=t[2]?" ("+(t[2][0]==8&&t[2][1]==9?"9":t[2]):t[2],n=t[3]?") "+t[3]:t[3],o=t[4]?"-"+t[4]:t[4],l=t[5]?"-"+t[5]:t[5];e.value=c+u+n+o+l};N.forEach((e,t)=>{e.addEventListener("input",c=>F(c.target))});(function(e,t,c,u,n,o,l){e[n]=e[n]||function(){(e[n].a=e[n].a||[]).push(arguments)},e[n].l=1*new Date;for(var r=0;r<document.scripts.length;r++)if(document.scripts[r].src===u)return;o=t.createElement(c),l=t.getElementsByTagName(c)[0],o.async=1,o.src=u,l.parentNode.insertBefore(o,l)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(100282784,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0});export{B as o};
